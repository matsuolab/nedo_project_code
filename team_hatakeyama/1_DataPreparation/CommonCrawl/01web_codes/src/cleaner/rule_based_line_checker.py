# https://github.com/lighttransport/japanese-llama-experiment/blob/main/03_clean_step1/clean_text.py

# TODO: hard codeしない
import random
import unicodedata
import re
broken_sentence_endings = """
...
... 
...　
\"
'
[…]
詳細を見る
すべて表示する
するまとめ
公式サイト
にアクセス!
お​問​い​合​わ​せ​
アクセスマップ
送料無料!
コメント(0)
トラックバックは利用できません。
この記事へのコメントはありません。
返信をキャンセルする。
URL
お問い合わせ
,?
周辺施設
続きを表示
音楽出版社求人
Check
マップMAP
未入力項目があります
SNS
●facebook→
●twitter→
ABOUT US
求人情報
1件中1～1件を表示
事業内容
トップページ
特集
賃貸情報
条件を選ぶ
現在の選択エリア
沿線から選ぶ
エリアを選びなおす
さらにエリアを絞る
△ページTOP
公式
About
search
プロフィール
更新情報をチェックする
検索:
関連記事
ブックマークする
友達に教える
お問い合せ
CLOSE
My account
Contact Us
ご利用方法
会員規約
特定商取引法に基づく表記
組織概要
<前の20件1次の20件>
官公庁臨時職員
湘南国際村仕事
タイアップ広告掲載
広告を掲載しませんか?
会社概要
Pocket
目次
TOP
から見つける
プライバシーポリシー
利用規約
All Rights Reserved.
滞在後投稿されたものです。
法令順守と犯罪抑止のために
メルカリあんしん・あんぜん宣言!
偽ブランド品撲滅への取り組み
スタッフブログ
賃貸ホームページ
物件カタログ
ホーム
メニュー
仲介手数料最大無料
口コミをもっと
詳細情報
ツイート
メルマガ
登録商標です。
ようこそゲストさん
→
[...]
の先頭へ
個人情報の取り扱いについて
中古マンション
»
パスワードをお忘れの方
上部へ
JavaScriptを有効にしてご利用下さい.
ログインできない時は?
運営会社
企業情報
問い合わせ
一覧へ
ヘルプ
物件
もっと見る
を探す
マンション
検索
店
検索のヒント:
新規の表示
Vths
Id
見出し語
Yomi
大分類1
小分類2
Pos
Actions
メールアドレス
パスワード
次回から自動ログインをする
パスワードを忘れた方はこちら
不動産無料査定
住まい紹介ブログ
🗣naamal
⋆。* ⋆。* ⋆
122投稿
サイトは?
トップ
ニュース
日程
著作権
記事・写真・動画の利用申込
採用情報
サイト一覧
関連情報
の投稿
ページトップへ
記事を読む
運営者情報
Twitter公式
もっとみる
投稿する
店舗TOP
スタッフ・開発者募集
ヘルプページ
最近のコメント
カレンダー
の情報:
の情報
いいね
キャンペーン
|BOOKED
HOME
よくある質問
BLOG
...
問い合わせください。
休診日
木曜日・日曜日・祝日
all rights reserved.
</tr>
</div>
浮気調査
カテゴリー
お知らせ
新着アイテム
アーカイブ
月
Search
TOPへ
TOPページへ
Menu
Return Top
携帯版はこちら
会社情報
初めての方へ
ダウンロード
アクセス
IR情報
一覧
採用サイト
マイページ
研究会会員
専用ページ
はこちら
相談する
相談
探す
事例を見る
お客様からの声(成功事例)
書籍
メタ情報
の詳細
Home
ログイン
投稿フィード
コメントフィード
船井総研のサービス
お客様からの声(成功事例)
レポート
サービス
船井総研のサービス概要
セミナー
経営研究会
コンサルティング
業種・テーマ
住宅・不動産
リフォーム
不動産
賃貸
建設
病院・クリニック
歯科医院
特定商取引法
はじめてお越しの方へ
LINE
menu
免責事項
閉じる
読者になる
リンク
Tweet
方法はコチラ
トップへ戻る
[ヘルプ]
のプロフィール
ランキング】
更新しました
アーカイヴ
未分類
お問合せ
シェア
[お問い合わせ]
[利用規約]
[個人情報保護方針]
/RSS
もっと読む
の検索結果
通販ショップ
フォローする
シェアする
MENU
このブログについて
コメントを書く
twitter
facebook
line
コメント
arrowup
読まれている記事
のビュー
質問箱
コメントをキャンセル
down
Website
more
Name
Email
home
新着情報
First
のQ&A
サイトへ
Previous
上へ
更新
Twitter
拡大
ランキング
Next
会員登録
Last
スタッフ紹介
1階層ページ
タイトル
この記事を削除する
2階層ページ
サイド見出し
送信する
イメージナビ
お客様の声・対策事例
ページ次のページ »
こちらから
役立つ文例集
お客様の声
個人情報保護ポリシー
特定商取引について
必須お名前
申込
フォーム
FAQ
電話する
ページ先頭へ
送信する
天気予報
ロフィールを表示
リンク集
上部へ戻る
へスキップ
Category
ご質問
ヤミ金の電話番号
最新記事
インフォメーション
コラム
事務所案内
サービス料金
リストナビ
掲示板BBS
地図ページ
メールフォーム
ケータイサイト
おすすめの注目情報を掲載。
この記事をツイートする
自動でツイートされます。
コメントをするには、
ログインして下さい。
ページの先頭へ戻る。
page
の口コミ
メニューにもどる。
調べる▼
検索結果
とURLをコピーしました
のご利用について
通販サイト
無料
無料ブログはココログ!
パスワードを忘れた方
特定商取引法表示
note(blog)
niconicoへのご意見・ご要望
ダウンロードはこちらからどうぞ。
下記のお問い合わせフォームでご連絡ください。
買い物かごカートに商品がありません。
ニュースレターに登録して最新情報やセール情報をいち早くゲット。
受信する受信しない
JavaScriptを有効にしてご覧ください。
このページの機能を利用するにはJavaScriptに対応したブラウザが必要です。
分で読めます。
無断転載を禁じます。
検索条件を入力してください。
コメント(0)トラックバックは利用できません。
この記事へのコメントはありません。返信をキャンセルする。
法令順守と犯罪抑止のためにメルカリあんしん・あんぜん宣言!Facebook
Facebook
はてなブログを使っています。
見つかりました
インプラント
歯科
VIPがお送りします
見積
ID:
PR
一覧
出会い
探せます
商品はございません
《前のページ|次のページ》
RSS
人気記事まだデータがありません。
投稿が見つかりませんでした。
投稿がありません。
別のサイトにジャンプしようとしています。
お問合せは24時間受け付けております。
お気軽にご連絡ください。
左の一覧からカテゴリーをお選びください。
までを表示します。

の人気クチコミ
JavaScriptをONにしてください。
サンプルです
リンクに追加する
サイドバー
これはテストです
のクチコミ
サイトについて
口コミ・感想!
ホーム>
Next Entry
"""

broken_ending_list = broken_sentence_endings.split("\n")
broken_ending_list = [x for x in broken_ending_list if len(x) > 0]

broken_ending_list += [
    '続きを読む', '[続きを読む]', '(続きを読む)', '続きを見る', '続きをみる', '(続く)', '(続きを表示)', '(続きをみる)', '[続きをみる]', '[続きを見る]',
]
broken_ending_list += ['...(続きを表示)', '[ 続きを見る ]',
                       '・・・続きを見る', '... 続きを読む',
                       "詳細はこちら »",
                       "詳細>>>",
                       "サイトマップ",
                       ]


noise_mid_list = """
Copyright(C)
デジタル広告ガイド
Copyright
HOME>
新聞広告ガイド
©
無断転載を禁止します
著作権
記事・写真・動画の利用申込
採用情報
Copyright © 
Copyright 
"""
noise_mid_list = noise_mid_list.split("\n")
noise_mid_list = [x for x in noise_mid_list if len(x) > 0]


random_mid_list = """
JavaScriptを
ページの先頭
登録・解除
お問い合わせ等
無料メールマガジン
配信登録
性癖
Blog
ブログ
ここに説明文が入ります
資料請求
メールですすめる
商品の状態
未使用
エリア・駅がありません
見つかりませんでした。
無料登録
人気記事
Top
新規登録
検索結果
当院
ホームページ
代表挨拶
チャンネル登録
借金
不動産
投資
カードローン
トップページ
Podcast
検索
賃貸
物件
Views
Clicks
.com
URL
更新日
配信
ランキング
徒歩
Javascriptの
記事一覧
ブログ
公開中
カート
このコンテンツ
パスワードで保護
サイト
公開物件
ホーム
予約
商品の
お探しの
サポートします
を掲載!
はこちら
レス数が1000を超えています
現在表示しているスレッド
このスレは
新着レスの表示
掲示板に戻る
前100
次100
最新50
Twitter
Facebook
はてブ
Pocket
LINE
ゲストさん
コメント(
コメント（
が提供
限定公開記事
本文へ
再度アクセス
メールでの
買い物を続ける
査定
個人情報保護
お買い上げ
印刷する
会員限定
プライバシー保護
無料
ご案内
mail
データ取得に失敗しました
@
このサイト
求人
タイムライン
SHARE
日記
閲覧
trackback
(-)
|
スポンサー広告
--------
page
top
Home
»
Loading.
URL
[編集]
▲
《
.jp
Escキー
楽天
営業
Yahoo!
メールアドレス
Share
フォロー
フォロワー
Youtube
VIEWS
購読する
最新情報
公開日
ちゃんねる
コンテンツ
購入手続
Twitter
@5ch
広告なし
周辺施設情報
賃貸マンション
Cookie
QRコード
出張
承ります
お任せください
タグ
ログイン
ユーザー登録
トップへ
食べログ
ご相談ください
全国対応
記事
お会計
リンク
ツール
引用
ストック
掲載
1 2 3 4 5
クリック
ご注文
メッセージ
お送りください
買い物
カート
RSS
全リスト
新着
いいね!
読む
とは?
CONTACT
エラーが発生しました
モバイル
お気に入り
もぐもぐ
利用者情報
運営者について
クリックで拡大
アイコン上
マウスカーソル
詳細情報
TikTok
特定商取引法
に基づく表示
プレイ日記
Q&A
よくあるご質問と回答
トピックス
背景色
メルマガ
(c)
javascript
dobe Reader
カテゴリ
ユーザー認証
早速見る
投稿
ナビゲーション
印刷
SNSでシェアしよう!
English
お問い合わせ
発送
業務
休日
状態
スペースキー
矢印キー
選択します
お客様各位
キャンペーン
お気に入り
探し方を変更する
掲示板
買い物を続ける
選んでください
配達日
選択してください
お電話
コメント
非公開
利用特定商取引法
基づく表示規約
お役立ち
個人情報の取扱
同意
Contact
URL
http
shares
ニュースレター
結果を見る
免責
PICK UP!
最近の記事
New!
Tweets
＝＝t?
をフォロー
お支払い
お選びいただけます。
ツイートする
すべて表示
お問合わせ
お客様
入会案内
事業全般
メールフォーム
カテゴリー
チェック
商品
お使いのブラウザ
JavaScript
店舗
登録
一覧
戻る
サービス
紹介
ページ
管理
送料
ショッピング
クレジットカード
ご利用
ガイド
お伝えします
ご紹介
お部屋探し
限定公開記事
再度お試し
利用規約
プライバシー
同意します
整骨院
クリニック
方針
Instagram
スマートフォン
ポリシー
contact
profile
void
会社案内
詳しく見る
ソーシャルメディア
1件
病院への地図
無料相談
文字を入力
過去の記事
メニューを閉じる
▶
Social
サイト
物件
メルカリ
ポイント
買取
ツイート
"""
random_mid_list = random_mid_list.split("\n")
random_mid_list = [x for x in random_mid_list if len(x) > 0]
random_mid_list = list(set(random_mid_list))


def clean(sent: str):
    for broken_ending in broken_ending_list:
        # print("aa", broken_ending)
        if sent.endswith(broken_ending):
            return None
        if len(sent) < 2:
            return None

    for noise_mid in noise_mid_list:
        if noise_mid in sent:
            return None

    # インターネットに特有の単語を含む文章を確率的に落とす
    for random_mid in random_mid_list:
        if random_mid in sent:
            if random.random() < 0.9:
                return None

    return sent
