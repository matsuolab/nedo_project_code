{"cells":[{"cell_type":"markdown","metadata":{"id":"Badj8wMmOx-Y"},"source":["#0.環境構築"]},{"cell_type":"markdown","metadata":{"id":"903-p8-KQMv5"},"source":["##0-1.まずは以下のサイトよりDeepInfraのアカウントを作成してください。\n","\n","https://deepinfra.com/"]},{"cell_type":"markdown","metadata":{"id":"TQXBxqZeRNrD"},"source":["##0-2.以下よりAPI KEYを取得してセルにセットしてください。\n","\n","https://deepinfra.com/dash/api_keys"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"pmuen0OJRmzS"},"outputs":[],"source":["DEEPINFRA_API_KEY = \"***\""]},{"cell_type":"markdown","metadata":{"id":"vWtoHEdDcDYQ"},"source":["##0-3.Google Driveをマウント"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"JZQM2SVEcIAm","outputId":"dd45b83d-737f-461c-d1c4-e942726f7b77"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')"]},{"cell_type":"markdown","metadata":{"id":"xCQXX0fzcw72"},"source":["エクセルファイルの保存先パスを設定してください。"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"V2UcVHvGcqlH"},"outputs":[],"source":["G_FOLDER = \"/content/drive/MyDrive/GENIAC\""]},{"cell_type":"markdown","metadata":{"id":"COVCQ0P1SIJ7"},"source":["##0-4.以下のコードで必要なライブラリのインストールと、APIのテスト実行を行います。"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"bkJRo-EnP5Ub","outputId":"23a3f359-67bf-434d-9d01-3f4508e4244d"},"outputs":[{"output_type":"stream","name":"stdout","text":["\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m320.6/320.6 kB\u001b[0m \u001b[31m4.6 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m542.0/542.0 kB\u001b[0m \u001b[31m7.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m75.6/75.6 kB\u001b[0m \u001b[31m8.4 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m116.3/116.3 kB\u001b[0m \u001b[31m6.1 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m194.1/194.1 kB\u001b[0m \u001b[31m8.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m134.8/134.8 kB\u001b[0m \u001b[31m7.3 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m401.2/401.2 kB\u001b[0m \u001b[31m10.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m77.9/77.9 kB\u001b[0m \u001b[31m10.2 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[2K     \u001b[90m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\u001b[0m \u001b[32m58.3/58.3 kB\u001b[0m \u001b[31m8.0 MB/s\u001b[0m eta \u001b[36m0:00:00\u001b[0m\n","\u001b[?25h"]}],"source":["!pip install -qU openai datasets"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ZCZYnBU1Oq_O"},"outputs":[],"source":["# Assume openai>=1.0.0\n","from openai import OpenAI\n","\n","# Create an OpenAI client with your deepinfra token and endpoint\n","openai = OpenAI(\n","    api_key=DEEPINFRA_API_KEY,\n","    base_url=\"https://api.deepinfra.com/v1/openai\",\n",")"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"vGu9qHSwbbAP","outputId":"b0eeab6a-d1c5-454d-aa43-d047b64727a0"},"outputs":[{"output_type":"stream","name":"stdout","text":[" 1\n"]}],"source":["chat_completion = openai.chat.completions.create(\n","    model=\"mistralai/Mixtral-8x22B-Instruct-v0.1\",\n","    messages=[{\"role\": \"system\", \"content\": \"あなたは日本語で回答するAIボットです。\"},\n","     {\"role\": \"user\", \"content\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。  本件に関しましては、貴社のご要望を踏まえて最適なソリューションをご提案させていただきます次第でございます。\"}],\n",")\n","\n","print(chat_completion.choices[0].message.content)"]},{"cell_type":"markdown","metadata":{"id":"YzB9ImkTesTA"},"source":["#1.データ生成処理の実行"]},{"cell_type":"markdown","metadata":{"id":"DxiV6f6NfJ7X"},"source":["##1-1.プロンプト準備"]},{"cell_type":"markdown","metadata":{"id":"zX5aJMAgg7zS"},"source":["言語理解でのプロンプト例"]},{"cell_type":"code","source":["PROMPT_TEMPLATE = \"\"\"\n","以下のタスク指示例を参考に、[10の多様なinputとoutputのペア]を考えてください。これらのタスク指示文はGPTモデルに与えられ、より言語性能が高いモデルを構築することを目的としています。\n","\n","要件は以下の通りです：\n","\n","1. **多様性を確保**：\n","   - 各タスク指示文は、様々な文脈や単語、主語を変更するなど多様性を最大限に引き出してください。また、それぞれ文章内容が出来るだけ被らないように作成してください。\n","\n","2. **出力は0か1**：\n","   - 出力は必ず1か0にしてください。\n","\n","3. **日本語で生成**：\n","   - 生成するinputとoutputは必ず日本語で生成してください。\n","\n","4. **文法的に正しいデータと誤りを含むデータを5:5で生成する**：\n","   - 生成するデータにおいて、文法的に正しいものと誤りを含むものを半数ずつ含むようにしてください。例えば合計で10件生成する場合はその内訳として5件が文法的に正しく, 5件が文法的に誤っているデータセットにしてください。\n","\n","5. **明確に誤り、多様化する**：\n","   - 誤りを含むデータは文法ミスや漢字表記ミスなど多様な誤り方をする文章としてください。また、確実に誤りであると分かるものにしてください。\n","\n","6. **JSON形式で出力**：\n","   - 回答フォーマット例に記載のJSON形式で回答してください。\n","\n","7. **文章の長さの多様性**：\n","   - 各タスク指示文の長さにも多様性を持たせてください。短い文章（15文字前後）と長い文章（50文字前後）をバランスよく生成してください。\n","\n","8. **生成順序のランダム化**：\n","   - 文法的に正しいデータと誤りを含むデータをランダムに生成してください。\n","\n","9. **ビジネスユースケースの含有**：\n","   - 一般的な文章に加えてビジネスユースケースを想定した指示文も含めてください。\n","\n","タスク指示例：\n","$FewShotExamples\n","\n","回答フォーマット例(JSON):\n","[\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"<入力文章>\",\n","    \"output\": \"<1 or 0>\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"<入力文章>\",\n","    \"output\": \"<1 or 0>\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"<入力文章>\",\n","    \"output\": \"<1 or 0>\"\n","  }\n","]\n","\n","\"\"\""],"metadata":{"id":"EnbgVmEWIibo"},"execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ykY8WJRrhAmW"},"outputs":[],"source":["FEWSHOT_EXAMPLES = [\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"本件に関しましては、貴社のご要望を踏まえて最適なソリューションをご提案させていただきます次第でございます。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"新製品の発売に向けて、マーケティング戦略の再検討が必要だと思います。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今日、渋谷で私は花子さんに会われた。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 4,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"本日の会議アジェンダは以下の通りで、まずは前回会議の確認からお話しできればと思います。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 5,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"君は日本に来た人をなぜ呼びました。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 6,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"起きてから外に行くと私は子供がタバコを飲むのを見つけた。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 7,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"彼女は昨年度からその部門を担当しており、これまで多くの改善を実現してきました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 8,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今日でずっと雨は降っています。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 9,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"この度のご提案においては弊社としても大変興味を持っており、さらに詳細を知りたいと考えております。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 10,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"市場環境の急激な変化に対応し、新しいビジネスモデルを構築するための計画を立てましたが、いくつかの外部要因によって進行中のプロジェクトの一部が中断されました。\",\n","    \"output\": \"1\"\n","  }\n","]"]},{"cell_type":"markdown","metadata":{"id":"AVTk8bDYfg1t"},"source":["##1-2.データ生成処理の実行"]},{"cell_type":"markdown","metadata":{"id":"tXqlWgh9ibD_"},"source":["パラメーターをセット"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"7hnSt_aTiUfq"},"outputs":[],"source":["TEMPERATURE=1 #temperature to use for sampling. 0 means the output is deterministic. Values greater than 1 encourage more diversity\n","MAX_TOKENS=30000\n","LOOP_NUM = 10 #1回あたり10件データを生成"]},{"cell_type":"code","source":["def run_model(PROMPT_TEMPLATE, TEMPERATURE=1, MAX_TOKENS=10000):\n","\n","    chat_completion = openai.chat.completions.create(\n","        model=\"mistralai/Mixtral-8x22B-Instruct-v0.1\",\n","        messages=[{\"role\": \"system\", \"content\": \"あなたは日本語の学習データセットを生成する専門家です。求められた要件をしっかりと理解し反映させることができます\"},\n","         {\"role\": \"user\", \"content\": PROMPT_TEMPLATE}],\n","        temperature=TEMPERATURE,#temperature to use for sampling. 0 means the output is deterministic. Values greater than 1 encourage more diversity\n","        top_p=0.9,#0 < top_p ≤ 1 Sample from the set of tokens with highest probability such that sum of probabilies is higher than p. Lower values focus on the most probable tokens.Higher values sample more low-probability tokens\n","        max_tokens=MAX_TOKENS,\n","        frequency_penalty=1.3,#-2 ≤ presence_penalty ≤ 2 Positive values penalize new tokens based on how many times they appear in the text so far, increasing the model's likelihood to talk about new topics.\n","        presence_penalty=1.3 #-2 ≤ presence_penalty ≤ 2 Positive values penalize new tokens based on whether they appear in the text so far, increasing the model's likelihood to talk about new topics.\n","        )\n","\n","    output = chat_completion.choices[0].message.content\n","\n","    return output"],"metadata":{"id":"CxE47jFuhdfq"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["from string import Template\n","from datetime import datetime\n","import pandas as pd\n","import json\n","\n","df_list = []\n","\n","### few-shot template ###\n","formatted_prompt_template = Template(PROMPT_TEMPLATE).substitute(FewShotExamples=FEWSHOT_EXAMPLES)\n","\n","for i in range(LOOP_NUM):\n","\n","    ### JSON形式で出力が出てこないケースがあるため、3回までリトライ ###\n","    for retry_i in range(3):\n","\n","        ### LLMによるデータ生成処理 ###\n","        output = run_model(formatted_prompt_template, TEMPERATURE, MAX_TOKENS)\n","        print(output)\n","\n","        try:\n","            df_output = pd.read_json(output)\n","            df_list.append(df_output)\n","            print(f\"Success parsing JSON\")\n","            break\n","        except Exception as e:\n","            print(e)\n","            print(f\"Error parsing JSON: {retry_i}\")\n","            continue\n","\n","\n","df_final = pd.concat(df_list)\n","\n","df_final.head()"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"QO-wHoFwhYJ2","outputId":"3c196dc2-1351-4b61-f90c-3ff342e0432d"},"execution_count":null,"outputs":[{"output_type":"stream","name":"stdout","text":[" [\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"広告主はカスタマー・ジャーニーを把握し、リターゲティングキャンペーンを実施した。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今朝八時に山田さんと会った。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちは本日オフィスへの向かい先へ移動する予定で、引き続きスムーズな契約手続きを進めていく所存です。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 4,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今回より人材紹介業許可を取得しました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 5,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちは先週左京区へ開発ライフサイクルの導入を進めました。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 6,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"海外企業向け・高度な要件に沿った、ECシステム提供を目指し行っております。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 7,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"皆様のご期待に添う価格設定を行いました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 8,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"あなたに遅れてすみません、先週私は病気で電車に乗れませんでした。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 9,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"当社ではユーザー体験に関するアンケート調査を実施いたしました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 10,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちはメインタレントを広げる計画を進めましたが、海外事業展開やグローバル化の取り組みによって現在一時的に保留中です。\",\n","    \"output\": \"0\"\n","  }\n","]\n","Success parsing JSON\n"," [\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"京都にあるこのレストランは美味しい和食が手orryです。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"企業戦略に取り組み、市場調査を実施、研究開発を推進しています。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"公共事業に投資すべきかどうかを検討しました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 4,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"困難に直面しているときは、常に協力し合って解決方法を探りましょう。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 5,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"この請負先は安心感を得られます。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 6,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私達が活躍するエリアは、インターネット事業と教育事業です。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 7,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"将来にわたって高い収益を維持するには、機械学習技術の導入が必要だと考えます。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 8,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちは長期的視野と短期的視点を融合させ、経営戦略を策定しました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 9,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今年度の売上げ目標を達成するために、新しい取引先を CONTRACT しました。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 10,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちの会社は、過去にRenditionを行った経験から、長期間の業績を納めてきました。\",\n","    \"output\": \"0\"\n","  }\n","]\n","Success parsing JSON\n"," [\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今年はビジネスの拡大に注力し、新たな顧客獲得に取り組んでいます。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"彼は前髪を下ろした口調で答えました。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"東京都内の飲食店は総じて売上が上がっています。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 4,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今年の新幹線旅客は、過去最多を更新しました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 5,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私は料理人であり、自分のお店をオープンしました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 6,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"本日の会議では要約と振り返りにご加えて、次回の作業予定についても必要であれば話し合ってみたいと思います。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 7,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"彼女は昨年度からその部門を担当しており、これまで多くの改善を実現してきました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 8,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"鈴木様、こちらで早速締結手続きを行うことになりますが、なにとぞよろしくお願いいたします。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 9,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"弊社は今後、特許取得による技術開発を進めていきます。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 10,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"毎月都内のポイントカード不足者ランキングが発表されています。\",\n","    \"output\": \"0\"\n","  }\n","]\n","Success parsing JSON\n"," [\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"会社は製品の開発に集中しています。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今朝、私は病院にいくべきでした。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちは今月末までに決定を下さい。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 4,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"約束した通りに頑張ってみせます。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 5,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"来月の予算は計画に沿って進行している\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 6,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"ご相談にあたって申し訳ありません、わからないです\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 7,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"先日はお店の新商品のレビューを KINDLE で送っていただき、ありがとうございました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 8,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私は何時に出かけるか分からない。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 9,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"同僚たちにあいさつしています。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 10,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"スポーツマンたちは魅力的で素晴らしい試合を見せてくれました。\",\n","    \"output\": \"1\"\n","  }\n","]\n","Success parsing JSON\n"," [{\"id\": 1, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"契約書を洗濯してね。\", \"output\": \"0\"}, {\"id\": 2, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"今回のスキャンデールが会社の信用を大きく毀損した可能性があります。\", \"output\": \"1\"}, {\"id\": 3, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"太郎は水を行く。\", \"output\": \"0\"}, {\"id\": 4, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"先ほどの取引は法律上問題があり、見直す必要があるかもしれません。\", \"output\": \"1\"}, {\"id\": 5, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"彼女が行った紹介により、私たちは新しい取引先となれました。\", \"output\": \"1\"}, {\"id\": 6, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"彼女が行った紹介により、私たちは新しい取引先となれました。\", \"output\": \"1\"}, {\"id\": 7, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"不適切な会話が知られてから、彼女は就任から外れました。\", \"output\": \"1\"}, {\"id\": 8, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"エラーが発生するときはそれを解決する必要があります。\", \"output\": \"1\"}, {\"id\": 9, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"お客様の満足度は重要な指標であり、毎年調査を行っています。\", \"output\": \"1\"}, {\"id\": 10, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"明日も天気は雨と予想されています。\", \"output\": \"1\"}]\n","Success parsing JSON\n"," [\n","  {\n","    \"id\": 1,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今回の件に関しましては、貴社のご意見を図り上げて、最適な企画をご提案させていただきます。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 2,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今朝、組織の目標達成率を評価しました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 3,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"会社の新技術を開発する際には、研究者を働かせることを確認してください。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 4,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今日から、小五郎太郎氏は部門を anymore 担当することになりました。\",\n","    \"output\": \"0\"\n","  },\n","  {\n","    \"id\": 5,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"10時から緊急会議が行われますので、準備をお願いします。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 6,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"試用期間終了後は、月額課金制度に移行してください。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 7,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"社員が就業する際、契約書に署名する必要があります。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 8,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今朝、私たちは新しい案件をさまざまな顧客にプレゼンしました。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 9,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"今回の案件では、不足分は追加注文を可能にしてください。\",\n","    \"output\": \"1\"\n","  },\n","  {\n","    \"id\": 10,\n","    \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\",\n","    \"input\": \"私たちの会社は明日、新技術を発表する予定です。\",\n","    \"output\": \"1\"\n","  }\n","]\n","Success parsing JSON\n"," [{\"id\": 1, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"先日、都心部に新規オフィスを開設いたしました。\", \"output\": \"0\"}, {\"id\": 2, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"営業部は今年度までにリニューアルを完了させました。\", \"output\": \"1\"}, {\"id\": 3, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"彼女は医者に電話してしまった。\", \"output\": \"0\"}, {\"id\": 4, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"本日の放送時間は午後3時から3時半までとなります。\", \"output\": \"1\"}, {\"id\": 5, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"私たちは少し前から海外市場に進出を検討しています。\", \"output\": \"1\"}, {\"id\": 6, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"今朝、ご覧いただいたメールについての確認をさせていただきます。\", \"output\": \"0\"}, {\"id\": 7, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"約10年前から未踏 /******////////\\/ 域を切り拓いているEnterpriseが10万件突破を果たしました。\", \"output\": \"0\"}, {\"id\": 8, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"東京都内全域で延命治療を行っている病院をお探しなら、 саれております。\", \"output\": \"0\"}, {\"id\": 9, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"新商品の導入に向けて、既存の業務処理を活用したスピード感が必要だと判断しております。\", \"output\": \"1\"}, {\"id\": 10, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"忘れ物に気付いた後、 immediatly/\"unknown\"/ \"\"\" passengers /\"\"\"\"\" boat に乗車いたしました。\", \"output\": \"0\"}]\n","Unexpected character found when decoding object value\n","Error parsing JSON: 0\n"," [{\"id\": 1, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"私たちの会社は世界中の多くの国に拠点を置いており、営業成績も上昇傾向にあります。\", \"output\": \"1\"}, {\"id\": 2, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"私たちの会社は広告活動において大きな成功を収めました。\", \"output\": \"1\"}, {\"id\": 3, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"私たちの新しい製品は非常に受けてもらいました。\", \"output\": \"0\"}, {\"id\": 4, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"彼女は、会社の採用インタビューであまり良く評価されなかったようです。\", \"output\": \"1\"}, {\"id\": 5, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"彼女たちは自分たちの部署の新たなリーダーに就任しました。\", \"output\": \"1\"}, {\"id\": 6, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"今日は行った注文が商品が入力しましたのでお支払い頂ければ幸いです。\", \"output\": \"0\"}, {\"id\": 7, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"私たちは本年度中に新製品を発表予定です。\", \"output\": \"1\"}, {\"id\": 8, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"彼女は将来的には会社の取締役に就任したいと考えています。\", \"output\": \"1\"}, {\"id\": 9, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"私たちの新規事業は現在大きな成功を収めており、今後も継続的にprofitを増やすことが期待されます。\", \"output\": \"1\"}, {\"id\": 10, \"instruction\": \"以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含んでいる場合には0を選択してください。\", \"input\": \"コンサルタントから予算が上回った報告書を受け取りました。\", \"output\": \"0\"}]\n","Success parsing JSON\n"]}]},{"cell_type":"code","source":["df_final"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":423},"id":"po2fwL8UbYiQ","outputId":"2007ef10-02de-4bfa-8c1e-1bf1c5cfcae5"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["    id                                        instruction  \\\n","0    1  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","1    2  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","2    3  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","3    4  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","4    5  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","..  ..                                                ...   \n","5    6  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","6    7  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","7    8  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","8    9  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","9   10  以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...   \n","\n","                                           input  output  \n","0                                仕事終わりにビール飲みに行く？       1  \n","1                                       うちで働きます。       1  \n","2                               仕事終わったらメール送信してね。       1  \n","3                                私は友達と映画館へ行きました。       1  \n","4                               会議室に着いた時間は何時ですか？       1  \n","..                                           ...     ...  \n","5              私たちの会社は様々なお客様に向けて製品やサービスを提供しています。       1  \n","6                      まず最初にお会いする際、ご多忙な中ご容赦ください。       0  \n","7                     今後、弊社は外部会社と提携して新規事業を展開します。       1  \n","8   私たちは自社の技術力を活かした製品開発を行っており、それらの製品を世界市に出しています。       1  \n","9                              お問い合わせを受け付けております。       1  \n","\n","[110 rows x 4 columns]"],"text/html":["\n","  <div id=\"df-de2e50b1-9ccb-425b-ba76-2b3b45c4c1ae\" class=\"colab-df-container\">\n","    <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id</th>\n","      <th>instruction</th>\n","      <th>input</th>\n","      <th>output</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>1</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>仕事終わりにビール飲みに行く？</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>うちで働きます。</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>仕事終わったらメール送信してね。</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>私は友達と映画館へ行きました。</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>会議室に着いた時間は何時ですか？</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>6</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>私たちの会社は様々なお客様に向けて製品やサービスを提供しています。</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>6</th>\n","      <td>7</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>まず最初にお会いする際、ご多忙な中ご容赦ください。</td>\n","      <td>0</td>\n","    </tr>\n","    <tr>\n","      <th>7</th>\n","      <td>8</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>今後、弊社は外部会社と提携して新規事業を展開します。</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>8</th>\n","      <td>9</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>私たちは自社の技術力を活かした製品開発を行っており、それらの製品を世界市に出しています。</td>\n","      <td>1</td>\n","    </tr>\n","    <tr>\n","      <th>9</th>\n","      <td>10</td>\n","      <td>以下の文章が文法的に正しいかどうかを評価してください。文法的に正しい場合には1を、誤りを含ん...</td>\n","      <td>お問い合わせを受け付けております。</td>\n","      <td>1</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>110 rows × 4 columns</p>\n","</div>\n","    <div class=\"colab-df-buttons\">\n","\n","  <div class=\"colab-df-container\">\n","    <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-de2e50b1-9ccb-425b-ba76-2b3b45c4c1ae')\"\n","            title=\"Convert this dataframe to an interactive table.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 -960 960 960\">\n","    <path d=\"M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z\"/>\n","  </svg>\n","    </button>\n","\n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    .colab-df-buttons div {\n","      margin-bottom: 4px;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","    <script>\n","      const buttonEl =\n","        document.querySelector('#df-de2e50b1-9ccb-425b-ba76-2b3b45c4c1ae button.colab-df-convert');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      async function convertToInteractive(key) {\n","        const element = document.querySelector('#df-de2e50b1-9ccb-425b-ba76-2b3b45c4c1ae');\n","        const dataTable =\n","          await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                    [key], {});\n","        if (!dataTable) return;\n","\n","        const docLinkHtml = 'Like what you see? Visit the ' +\n","          '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","          + ' to learn more about interactive tables.';\n","        element.innerHTML = '';\n","        dataTable['output_type'] = 'display_data';\n","        await google.colab.output.renderOutput(dataTable, element);\n","        const docLink = document.createElement('div');\n","        docLink.innerHTML = docLinkHtml;\n","        element.appendChild(docLink);\n","      }\n","    </script>\n","  </div>\n","\n","\n","<div id=\"df-6339b5d0-0568-4c10-bccc-d5d3a6804b3d\">\n","  <button class=\"colab-df-quickchart\" onclick=\"quickchart('df-6339b5d0-0568-4c10-bccc-d5d3a6804b3d')\"\n","            title=\"Suggest charts\"\n","            style=\"display:none;\">\n","\n","<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","     width=\"24px\">\n","    <g>\n","        <path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z\"/>\n","    </g>\n","</svg>\n","  </button>\n","\n","<style>\n","  .colab-df-quickchart {\n","      --bg-color: #E8F0FE;\n","      --fill-color: #1967D2;\n","      --hover-bg-color: #E2EBFA;\n","      --hover-fill-color: #174EA6;\n","      --disabled-fill-color: #AAA;\n","      --disabled-bg-color: #DDD;\n","  }\n","\n","  [theme=dark] .colab-df-quickchart {\n","      --bg-color: #3B4455;\n","      --fill-color: #D2E3FC;\n","      --hover-bg-color: #434B5C;\n","      --hover-fill-color: #FFFFFF;\n","      --disabled-bg-color: #3B4455;\n","      --disabled-fill-color: #666;\n","  }\n","\n","  .colab-df-quickchart {\n","    background-color: var(--bg-color);\n","    border: none;\n","    border-radius: 50%;\n","    cursor: pointer;\n","    display: none;\n","    fill: var(--fill-color);\n","    height: 32px;\n","    padding: 0;\n","    width: 32px;\n","  }\n","\n","  .colab-df-quickchart:hover {\n","    background-color: var(--hover-bg-color);\n","    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);\n","    fill: var(--button-hover-fill-color);\n","  }\n","\n","  .colab-df-quickchart-complete:disabled,\n","  .colab-df-quickchart-complete:disabled:hover {\n","    background-color: var(--disabled-bg-color);\n","    fill: var(--disabled-fill-color);\n","    box-shadow: none;\n","  }\n","\n","  .colab-df-spinner {\n","    border: 2px solid var(--fill-color);\n","    border-color: transparent;\n","    border-bottom-color: var(--fill-color);\n","    animation:\n","      spin 1s steps(1) infinite;\n","  }\n","\n","  @keyframes spin {\n","    0% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","      border-left-color: var(--fill-color);\n","    }\n","    20% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    30% {\n","      border-color: transparent;\n","      border-left-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","      border-right-color: var(--fill-color);\n","    }\n","    40% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-top-color: var(--fill-color);\n","    }\n","    60% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","    }\n","    80% {\n","      border-color: transparent;\n","      border-right-color: var(--fill-color);\n","      border-bottom-color: var(--fill-color);\n","    }\n","    90% {\n","      border-color: transparent;\n","      border-bottom-color: var(--fill-color);\n","    }\n","  }\n","</style>\n","\n","  <script>\n","    async function quickchart(key) {\n","      const quickchartButtonEl =\n","        document.querySelector('#' + key + ' button');\n","      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.\n","      quickchartButtonEl.classList.add('colab-df-spinner');\n","      try {\n","        const charts = await google.colab.kernel.invokeFunction(\n","            'suggestCharts', [key], {});\n","      } catch (error) {\n","        console.error('Error during call to suggestCharts:', error);\n","      }\n","      quickchartButtonEl.classList.remove('colab-df-spinner');\n","      quickchartButtonEl.classList.add('colab-df-quickchart-complete');\n","    }\n","    (() => {\n","      let quickchartButtonEl =\n","        document.querySelector('#df-6339b5d0-0568-4c10-bccc-d5d3a6804b3d button');\n","      quickchartButtonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","    })();\n","  </script>\n","</div>\n","\n","  <div id=\"id_a7f2599c-6d2a-452b-b5bd-15db269eb258\">\n","    <style>\n","      .colab-df-generate {\n","        background-color: #E8F0FE;\n","        border: none;\n","        border-radius: 50%;\n","        cursor: pointer;\n","        display: none;\n","        fill: #1967D2;\n","        height: 32px;\n","        padding: 0 0 0 0;\n","        width: 32px;\n","      }\n","\n","      .colab-df-generate:hover {\n","        background-color: #E2EBFA;\n","        box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","        fill: #174EA6;\n","      }\n","\n","      [theme=dark] .colab-df-generate {\n","        background-color: #3B4455;\n","        fill: #D2E3FC;\n","      }\n","\n","      [theme=dark] .colab-df-generate:hover {\n","        background-color: #434B5C;\n","        box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","        filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","        fill: #FFFFFF;\n","      }\n","    </style>\n","    <button class=\"colab-df-generate\" onclick=\"generateWithVariable('df_final')\"\n","            title=\"Generate code using this dataframe.\"\n","            style=\"display:none;\">\n","\n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M7,19H8.4L18.45,9,17,7.55,7,17.6ZM5,21V16.75L18.45,3.32a2,2,0,0,1,2.83,0l1.4,1.43a1.91,1.91,0,0,1,.58,1.4,1.91,1.91,0,0,1-.58,1.4L9.25,21ZM18.45,9,17,7.55Zm-12,3A5.31,5.31,0,0,0,4.9,8.1,5.31,5.31,0,0,0,1,6.5,5.31,5.31,0,0,0,4.9,4.9,5.31,5.31,0,0,0,6.5,1,5.31,5.31,0,0,0,8.1,4.9,5.31,5.31,0,0,0,12,6.5,5.46,5.46,0,0,0,6.5,12Z\"/>\n","  </svg>\n","    </button>\n","    <script>\n","      (() => {\n","      const buttonEl =\n","        document.querySelector('#id_a7f2599c-6d2a-452b-b5bd-15db269eb258 button.colab-df-generate');\n","      buttonEl.style.display =\n","        google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","      buttonEl.onclick = () => {\n","        google.colab.notebook.generateWithVariable('df_final');\n","      }\n","      })();\n","    </script>\n","  </div>\n","\n","    </div>\n","  </div>\n"],"application/vnd.google.colaboratory.intrinsic+json":{"type":"dataframe","variable_name":"df_final","summary":"{\n  \"name\": \"df_final\",\n  \"rows\": 110,\n  \"fields\": [\n    {\n      \"column\": \"id\",\n      \"properties\": {\n        \"dtype\": \"number\",\n        \"std\": 4,\n        \"min\": 1,\n        \"max\": 20,\n        \"num_unique_values\": 20,\n        \"samples\": [\n          1,\n          18,\n          16\n        ],\n        \"semantic_type\": \"\",\n        \"description\": \"\"\n      }\n    },\n    {\n      \"column\": \"instruction\",\n      \"properties\": {\n        \"dtype\": \"category\",\n        \"num_unique_values\": 1,\n        \"samples\": [\n          \"\\u4ee5\\u4e0b\\u306e\\u6587\\u7ae0\\u304c\\u6587\\u6cd5\\u7684\\u306b\\u6b63\\u3057\\u3044\\u304b\\u3069\\u3046\\u304b\\u3092\\u8a55\\u4fa1\\u3057\\u3066\\u304f\\u3060\\u3055\\u3044\\u3002\\u6587\\u6cd5\\u7684\\u306b\\u6b63\\u3057\\u3044\\u5834\\u5408\\u306b\\u306f1\\u3092\\u3001\\u8aa4\\u308a\\u3092\\u542b\\u3093\\u3067\\u3044\\u308b\\u5834\\u5408\\u306b\\u306f0\\u3092\\u9078\\u629e\\u3057\\u3066\\u304f\\u3060\\u3055\\u3044\\u3002\"\n        ],\n        \"semantic_type\": \"\",\n        \"description\": \"\"\n      }\n    },\n    {\n      \"column\": \"input\",\n      \"properties\": {\n        \"dtype\": \"string\",\n        \"num_unique_values\": 108,\n        \"samples\": [\n          \"\\u5e74\\u9593\\u30ec\\u30dd\\u30fc\\u30c8\\u306f\\u4eca\\u6708\\u672b\\u3067\\u63d0\\u51fa\\u4e88\\u5b9a\\u3067\\u3059\\u3002\"\n        ],\n        \"semantic_type\": \"\",\n        \"description\": \"\"\n      }\n    },\n    {\n      \"column\": \"output\",\n      \"properties\": {\n        \"dtype\": \"number\",\n        \"std\": 0,\n        \"min\": 0,\n        \"max\": 1,\n        \"num_unique_values\": 2,\n        \"samples\": [\n          0\n        ],\n        \"semantic_type\": \"\",\n        \"description\": \"\"\n      }\n    }\n  ]\n}"}},"metadata":{},"execution_count":28}]},{"cell_type":"markdown","metadata":{"id":"NuVdONsrfpg9"},"source":["##1-3.データの保存"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"1hRLXUN1fJJC","outputId":"c571dcf3-eaec-4d1b-b93d-53aaa7144b39"},"outputs":[{"output_type":"stream","name":"stdout","text":["File saved as: /generated_data_2024-05-17_10-31-09.xlsx\n"]}],"source":["import datetime\n","\n","# Get the current datetime\n","now = datetime.datetime.now()\n","\n","# Format the datetime as a string\n","timestamp = now.strftime(\"%Y-%m-%d_%H-%M-%S\")\n","\n","# Create the filename with the timestamp\n","filename = f\"/generated_data_{timestamp}.xlsx\"\n","\n","# Save the DataFrame to an Excel file with the timestamped filename\n","df_final.to_excel(G_FOLDER + filename, index=False)\n","\n","print(f\"File saved as: {filename}\")"]}],"metadata":{"colab":{"provenance":[],"machine_shape":"hm","gpuType":"A100"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"},"accelerator":"GPU"},"nbformat":4,"nbformat_minor":0}