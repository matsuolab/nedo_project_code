【run_tokenizer_experiments.pyの仕様書】

１．CSVファイル (experiment_settings.csv) から実験設定を読み込む
２．各実験設定について、以下の処理を行う:
- コーパスファイルを読み込む (corpus_pathで指定、相対パスまたは絶対パス)
- 前処理スクリプトを実行 (preprocess_script列で指定)
- 前処理関数を適用 (preprocess_functions列で指定)
- カスタムトークナイザーを学習
- エラー語句を収集し、CSVファイルに保存
- 評価用コーパスを使ってトークナイザーを評価
- 評価結果をCSVファイルに保存
- 全体の結果をall_results.csvに追記
- 実験の進捗状況をexperiment_settings.csvのpreprocess列で管理 (0: 未処理, 1: 処理中, 2: エラー, 3: 完了)
3.エラーが発生した場合、エラーメッセージを表示し、実験設定のpreprocess列を2に更新
4. 処理が完了したら、更新された実験設定をexperiment_settings.csvに保存
【corpus_preprocess.pyの仕様書】

1.テキストに対して、ジャンルごとの前処理関数を提供
2.コマンドライン引数で、入力テキストファイル、ジャンル、出力ファイル、除去要素の出力オプションを指定可能
3.指定されたジャンルに応じて、適切な前処理関数を呼び出す
4.前処理後のテキストを出力ファイルに保存
5.オプションで、除去された要素を表示

【ディレクトリ構成のルール】
project_root/
├── run_tokenizer_experiments.py
├── corpus_preprocess.py
├── experiment_settings.csv
└── (dataset_results_pathで指定されたディレクトリ)/
    ├── corpus_name_1/
    │   ├── corpus_basename_1/
    │   │   ├── preprocess_scripts/
    │   │   ├── error_words/
    │   │   └── eval_results/
    │   └── all_results.csv
    └── corpus_name_2/
        ├── corpus_basename_2/
        │   ├── preprocess_scripts/
        │   ├── error_words/
        │   └── eval_results/
        └── all_results.csv


【コーパスチームが変更を加える手順書】

1. experiment_settings.csvを編集:
- 新しい実験を追加する場合は、新しい行を追加
- 既存の実験を変更する場合は、対応する行を編集
- corpus_path列で、コーパスファイルのパスを指定 (相対パスまたは絶対パス)
- dataset_results_path列で、実験結果の出力先ディレクトリを指定
2. 必要に応じて、新しい前処理スクリプトを作成:
- corpus_preprocess.pyを複製・リネーム
- 新しいジャンルに特化した前処理関数を追加
- experiment_settings.csvのpreprocess_scriptとpreprocess_functions- 列で、新しいスクリプトと関数を指定
3. run_tokenizer_experiments.pyを実行:
- コマンドラインで python run_tokenizer_experiments.py を実行
- 処理の進捗状況と結果が表示され、dataset_results_path列で指定されたディレクトリ内に結果が保存される
4. 結果を確認:
- all_results.csvに全体の結果が記録
- エラー語句、評価結果、前処理スクリプトは、dataset_results_path列で指定されたディレクトリ内のサブディレクトリに保存
- 必要に応じて、vocab_size、coverage、preprocess_functions列の値を調整し、再度実行

【all_results.csvの評価指標】

- coverage: トークナイザーの語彙がコーパスをどの-程度カバーしているかを示す指標。高いほど良い。
- unk_rate: トークナイザーの語彙に含まれない単語の割合。低いほど良い。
- avg_len: トークナイズされた単語の平均文字数。単語の粒度を示す指標。タスクに応じて適切な値を選択。
- speed: トークナイザーの処理速度。高いほど良い。

コーパスチームは、experiment_settings.csvを編集し、corpus_path列でコーパスファイルのパス（相対パスまたは絶対パス）を指定します。また、dataset_results_path列で実験結果の出力先ディレクトリを指定します。
run_tokenizer_experiments.pyを実行することで、トークナイザーの実験を管理します。
dataset_results_path列で指定されたディレクトリ内の結果を確認し、all_results.csvの評価指標を参考に、最適なトークナイザーの設定を決定します。
vocab_size、coverage、preprocess_functionsの値を調整しながら、複数回の実験を行うことが重要です。

以上、不明な点や問題がある場合は、お知らせください。

